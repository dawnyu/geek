<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    
    <title>前端面试官怎么总喜欢问watch和computed | 极客部落</title>
    <meta name="description" content="watch和computed有什么区别,vue3中watch怎么用,vue3中computed怎么用">
    <link rel="preload stylesheet" href="/assets/style.6fda4ba5.css" as="style">
    
    <script type="module" src="/assets/app.50e53fa7.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.e34e23c1.js">
    <link rel="modulepreload" href="/assets/chunks/theme.54124eee.js">
    <link rel="modulepreload" href="/assets/article_面试中常问的watch和computed区别.md.4ffc362e.lean.js">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>var _hmt=_hmt||[];(function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?97bef4a5f23e8d6596d413bbf5c4cc4e";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <meta name="keywords" content="watch和computed有什么区别,vue3中watch怎么用,vue3中computed怎么用">
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5a346dfe><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5a346dfe data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-a0fd61f4><div class="container" data-v-a0fd61f4><div class="title" data-v-a0fd61f4><div class="VPNavBarTitle" data-v-a0fd61f4 data-v-86d1bed8><a class="title" href="/" data-v-86d1bed8><!--[--><!--]--><!----><!--[-->极客部落<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-a0fd61f4><div class="curtain" data-v-a0fd61f4></div><div class="content-body" data-v-a0fd61f4><!--[--><!--]--><div class="VPNavBarSearch search" data-v-a0fd61f4><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-a0fd61f4 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>🏘️ 首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/category/special.html" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>🎉 技术专栏</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/interview-question/HTML%E5%9F%BA%E7%A1%80.html" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>🤣 面试宝典</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/category/resource.html" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>📚 编程资源</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-a0fd61f4 data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-e6aabb21 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-a0fd61f4 data-v-40855f84 data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9c007e85><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-9c007e85><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-a0fd61f4 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav fixed reached-top" data-v-5a346dfe data-v-79c8c1df><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-79c8c1df data-v-1c15a60a><button data-v-1c15a60a>Return to top</button><!----></div></div><!----><div class="VPContent" id="VPContent" data-v-5a346dfe data-v-669faec9><div class="container max-w-full" data-v-669faec9 data-v-0cd1f2d6><main class="main bg px-15 py-4 m-auto" data-v-0cd1f2d6><article class="vp-doc flex-1 pt-5 px-5 pb-8 bg-white rounded-2" data-v-0cd1f2d6><div style="position:relative;" class="prose dark:prose-invert max-w-none" data-v-0cd1f2d6><div><h1 id="前端面试官怎么总喜欢问watch和computed" tabindex="-1">前端面试官怎么总喜欢问watch和computed <a class="header-anchor" href="#前端面试官怎么总喜欢问watch和computed" aria-label="Permalink to &quot;前端面试官怎么总喜欢问watch和computed&quot;">​</a></h1><!----><p>在现代前端的面试中，vue和react是面试过程中基本必问的技术栈，其中在聊到Vue响应式话题时，<code>watch和computed</code>是面试官非常喜欢聊的主题，虽然<code>watch</code>和<code>computed</code>它们都用于监听数据的变化，但它们在实现原理、使用场景和行为上有着显著的区别。本文将深入探讨<code>watch</code>和<code>computed</code>的原理和区别，并提供一些面试过程中的建议。</p><h2 id="先了解下vue-3响应式" tabindex="-1">先了解下Vue 3响应式 <a class="header-anchor" href="#先了解下vue-3响应式" aria-label="Permalink to &quot;先了解下Vue 3响应式&quot;">​</a></h2><p>Vue 3使用了Proxy作为其底层响应式实现可以监听对象属性的变化并触发相应的更新。当你访问数据时，Vue会建立一个依赖关系，然后在数据发生变化时通知相关的依赖项，从而更新视图。在这个背景下，我们深入探讨<code>watch</code>和<code>computed</code>的底层源码和使用上的区别。</p><h2 id="watch" tabindex="-1">Watch <a class="header-anchor" href="#watch" aria-label="Permalink to &quot;Watch&quot;">​</a></h2><p><code>watch</code>选项允许你监听数据的变化并执行自定义的操作。它通常用于监视某个数据的变化并执行副作用，比如异步请求、打印日志或触发动画。当你创建一个<code>watch</code>属性时，Vue会建立一个响应式依赖关系，将该<code>watch</code>属性关联到你要监视的数据。当监视的数据发生变化时，Vue会通知相关的<code>watch</code>属性，触发其回调函数。这个回调函数会接收新值和旧值作为参数，你可以在其中执行所需的操作。</p><h3 id="源码分析" tabindex="-1">源码分析 <a class="header-anchor" href="#源码分析" aria-label="Permalink to &quot;源码分析&quot;">​</a></h3><p>相关文件：<code>vue/src/runtime-core/apiWatch.ts</code>和<code>vue/src/reactivity/src/effect.ts</code>。</p><p>在Vue 3的源码中，<code>watch</code>的实现主要依赖于<code>createWatcher</code>函数和<code>Watcher</code>类。</p><ul><li><code>createWatcher</code>函数负责创建<code>Watcher</code>实例，并接收监视的数据、回调函数以及其他选项。</li><li><code>Watcher</code>类是<code>watch</code>的核心，它建立了对监视数据的依赖，并在数据变化时触发回调函数。</li><li>在<code>Watcher</code>的内部，依赖项追踪和回调触发是通过Vue的响应式系统实现的。当监视的数据发生变化时，Vue会检测到依赖关系，从而触发<code>Watcher</code>的回调。</li></ul><h4 id="解读" tabindex="-1">解读 <a class="header-anchor" href="#解读" aria-label="Permalink to &quot;解读&quot;">​</a></h4><p>1、在<code>vue/src/runtime-core/apiWatch.ts</code>中，<code>watch</code>函数负责创建<code>Watcher</code>实例，如下所示：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">watch</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">source</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">WatchSource</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">cb</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">WatchCallback</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">options</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">WatchOptions</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">WatchStopHandle</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 创建一个watcher实例</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">watcher</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Watcher</span><span style="color:#E1E4E8;">(vm, source, cb, {</span></span>
<span class="line"><span style="color:#E1E4E8;">    deep: options </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> options.deep,</span></span>
<span class="line"><span style="color:#E1E4E8;">    flush: options </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> options.flush,</span></span>
<span class="line"><span style="color:#E1E4E8;">    onTrack: options </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> options.onTrack,</span></span>
<span class="line"><span style="color:#E1E4E8;">    onTrigger: options </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> options.onTrigger,</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">watch</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">source</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">WatchSource</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">cb</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">WatchCallback</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">options</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">WatchOptions</span></span>
<span class="line"><span style="color:#24292E;">)</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">WatchStopHandle</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 创建一个watcher实例</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">watcher</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Watcher</span><span style="color:#24292E;">(vm, source, cb, {</span></span>
<span class="line"><span style="color:#24292E;">    deep: options </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> options.deep,</span></span>
<span class="line"><span style="color:#24292E;">    flush: options </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> options.flush,</span></span>
<span class="line"><span style="color:#24292E;">    onTrack: options </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> options.onTrack,</span></span>
<span class="line"><span style="color:#24292E;">    onTrigger: options </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> options.onTrigger,</span></span>
<span class="line"><span style="color:#24292E;">  });</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>这段代码创建了一个<code>Watcher</code>实例，其中<code>vm</code>是Vue实例，<code>source</code>是要监视的数据，<code>cb</code>是回调函数，以及其他选项。</p><p>2、Watcher<code>的核心工作在</code>vue/src/reactivity/src/effect.ts`中，其中包含了依赖项追踪和回调触发的逻辑。下面是一个简化的示例：</p><div class="language-JavaScript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Watcher</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 设置当前的watcher为活动watcher</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">pushTarget</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 执行监视的数据，触发依赖项的收集</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">value</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.getter.</span><span style="color:#B392F0;">call</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.vm, </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.vm);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 恢复之前的watcher</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">popTarget</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> value;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">update</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 触发回调函数，通知数据变化</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">run</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">run</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 执行回调函数</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">value</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (value </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.value </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isObject</span><span style="color:#E1E4E8;">(value) </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.deep) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// 触发回调函数</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">cb</span><span style="color:#E1E4E8;">(value, </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.value);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.value </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> value;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Watcher</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 设置当前的watcher为活动watcher</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">pushTarget</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 执行监视的数据，触发依赖项的收集</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">value</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.getter.</span><span style="color:#6F42C1;">call</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.vm, </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.vm);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 恢复之前的watcher</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">popTarget</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> value;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">update</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 触发回调函数，通知数据变化</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">run</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">run</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 执行回调函数</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">value</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (value </span><span style="color:#D73A49;">!==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.value </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isObject</span><span style="color:#24292E;">(value) </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.deep) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// 触发回调函数</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">cb</span><span style="color:#24292E;">(value, </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.value);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.value </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> value;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>这段代码展示了<code>Watcher</code>的关键部分，包括<code>get</code>方法用于获取数据和触发依赖项追踪，以及<code>update</code>和<code>run</code>方法用于触发回调函数。</p><h3 id="watch使用" tabindex="-1">watch使用 <a class="header-anchor" href="#watch使用" aria-label="Permalink to &quot;watch使用&quot;">​</a></h3><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;Count: {{ count }}&lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;Doubled Count: {{ doubledCount }}&lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">@click</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;incrementCount&quot;</span><span style="color:#E1E4E8;">&gt;Increment Count&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ref, watch } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">doubledCount</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">incrementCount</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  count.value</span><span style="color:#F97583;">++</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">watch</span><span style="color:#E1E4E8;">(count, (</span><span style="color:#FFAB70;">newVal</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">oldVal</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 监听 count 的变化</span></span>
<span class="line"><span style="color:#E1E4E8;">  doubledCount.value </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> newVal </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;Count: {{ count }}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;Doubled Count: {{ doubledCount }}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">@click</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;incrementCount&quot;</span><span style="color:#24292E;">&gt;Increment Count&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { ref, watch } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">count</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">doubledCount</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">incrementCount</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  count.value</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">watch</span><span style="color:#24292E;">(count, (</span><span style="color:#E36209;">newVal</span><span style="color:#24292E;">, </span><span style="color:#E36209;">oldVal</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 监听 count 的变化</span></span>
<span class="line"><span style="color:#24292E;">  doubledCount.value </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> newVal </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>在这个示例中，我们使用 <code>&lt;script setup&gt;</code> 来导入 <code>ref</code> 和 <code>watch</code>，并创建了 <code>count</code> 和 <code>doubledCount</code> 的响应式变量。然后，我们使用 <code>watch</code> 来监听 <code>count</code> 的变化，并在 <code>count</code> 变化时更新 <code>doubledCount</code> 的值。</p><h2 id="computed" tabindex="-1">Computed <a class="header-anchor" href="#computed" aria-label="Permalink to &quot;Computed&quot;">​</a></h2><p><code>computed</code>的工作原理与<code>watch</code> 有一些差异。<code>computed</code>允许派生出一个新的计算属性，它依赖于其他响应式数据。当你定义一个<code>computed</code>属性时，Vue会建立一个依赖关系，将该计算属性关联到其依赖项。计算属性的值仅在其依赖项发生变化时重新计算，并且在多次访问时会返回缓存的结果。这可以减少不必要的计算，提高性能。</p><h3 id="源码分析-1" tabindex="-1">源码分析 <a class="header-anchor" href="#源码分析-1" aria-label="Permalink to &quot;源码分析&quot;">​</a></h3><p>在Vue 3的源码中，<code>computed</code>的实现主要依赖于<code>createComputed</code>函数和<code>ComputedRefImpl</code>类。相关部分位于<code>vue/src/reactivity/src/computed.ts</code>文件中。</p><ul><li><code>createComputed</code>函数负责创建<code>ComputedRefImpl</code>实例，接收计算函数和其他选项。</li><li><code>ComputedRefImpl</code>类是<code>computed</code>的核心，它包装了计算函数并实现了缓存机制。计算函数的执行和结果的缓存是通过Vue的响应式系统实现的。</li><li><code>ComputedRefImpl</code>实例在内部维护一个缓存，当依赖的数据变化时，它会重新计算并更新缓存。</li></ul><h4 id="解读-1" tabindex="-1">解读 <a class="header-anchor" href="#解读-1" aria-label="Permalink to &quot;解读&quot;">​</a></h4><p>1、在<code>vue/src/reactivity/src/computed.ts</code>中，<code>computed</code>函数负责创建<code>ComputedRefImpl</code>实例，如下所示：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">export function computed&lt;T&gt;(</span></span>
<span class="line"><span style="color:#e1e4e8;">  getter: ComputedGetter&lt;T&gt;,</span></span>
<span class="line"><span style="color:#e1e4e8;">  options?: ComputedOptions</span></span>
<span class="line"><span style="color:#e1e4e8;">): ComputedRef&lt;T&gt; {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // 创建一个computed实例</span></span>
<span class="line"><span style="color:#e1e4e8;">  const c = new ComputedRefImpl(getter, options);</span></span>
<span class="line"><span style="color:#e1e4e8;">  // ...</span></span>
<span class="line"><span style="color:#e1e4e8;">  return c;</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">export function computed&lt;T&gt;(</span></span>
<span class="line"><span style="color:#24292e;">  getter: ComputedGetter&lt;T&gt;,</span></span>
<span class="line"><span style="color:#24292e;">  options?: ComputedOptions</span></span>
<span class="line"><span style="color:#24292e;">): ComputedRef&lt;T&gt; {</span></span>
<span class="line"><span style="color:#24292e;">  // 创建一个computed实例</span></span>
<span class="line"><span style="color:#24292e;">  const c = new ComputedRefImpl(getter, options);</span></span>
<span class="line"><span style="color:#24292e;">  // ...</span></span>
<span class="line"><span style="color:#24292e;">  return c;</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这段代码创建了一个<code>ComputedRefImpl</code>实例，其中<code>getter</code>是计算函数，<code>options</code>包含一些选项。</p><p>2、<code>ComputedRefImpl</code>的核心工作是负责追踪依赖项和缓存计算结果。下面是一个简化的示例：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">class ComputedRefImpl&lt;T&gt; {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // ...</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  get value() {</span></span>
<span class="line"><span style="color:#e1e4e8;">    // 如果依赖项发生变化，或者值尚未计算</span></span>
<span class="line"><span style="color:#e1e4e8;">    if (this.dirty) {</span></span>
<span class="line"><span style="color:#e1e4e8;">      // 清除之前的依赖项</span></span>
<span class="line"><span style="color:#e1e4e8;">      cleanup(this);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">      // 设置当前的computed属性为活动属性</span></span>
<span class="line"><span style="color:#e1e4e8;">      track(this);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">      // 执行计算函数，获取新值</span></span>
<span class="line"><span style="color:#e1e4e8;">      this.value = this.effect();</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">      // 标记computed属性为已计算</span></span>
<span class="line"><span style="color:#e1e4e8;">      this.dirty = false;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">      // 清理并设置新的依赖项</span></span>
<span class="line"><span style="color:#e1e4e8;">      stop(this);</span></span>
<span class="line"><span style="color:#e1e4e8;">    }</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">    // 返回缓存的值</span></span>
<span class="line"><span style="color:#e1e4e8;">    return this.value;</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  // ...</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">class ComputedRefImpl&lt;T&gt; {</span></span>
<span class="line"><span style="color:#24292e;">  // ...</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  get value() {</span></span>
<span class="line"><span style="color:#24292e;">    // 如果依赖项发生变化，或者值尚未计算</span></span>
<span class="line"><span style="color:#24292e;">    if (this.dirty) {</span></span>
<span class="line"><span style="color:#24292e;">      // 清除之前的依赖项</span></span>
<span class="line"><span style="color:#24292e;">      cleanup(this);</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">      // 设置当前的computed属性为活动属性</span></span>
<span class="line"><span style="color:#24292e;">      track(this);</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">      // 执行计算函数，获取新值</span></span>
<span class="line"><span style="color:#24292e;">      this.value = this.effect();</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">      // 标记computed属性为已计算</span></span>
<span class="line"><span style="color:#24292e;">      this.dirty = false;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">      // 清理并设置新的依赖项</span></span>
<span class="line"><span style="color:#24292e;">      stop(this);</span></span>
<span class="line"><span style="color:#24292e;">    }</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">    // 返回缓存的值</span></span>
<span class="line"><span style="color:#24292e;">    return this.value;</span></span>
<span class="line"><span style="color:#24292e;">  }</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">  // ...</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>这段代码展示了<code>ComputedRefImpl</code>的核心工作流程：</p><ol><li>当首次访问<code>computed</code>属性或相关依赖项发生变化时，<code>computed</code>属性会被标记为&quot;dirty&quot;（未计算）。</li><li>在获取属性值时，<code>value</code>的<code>getter</code>函数会被触发。</li><li>在获取属性值时，Vue会清除先前的依赖项，然后重新追踪新的依赖项。</li><li>计算函数(<code>effect</code>)会被执行，以获取新的值。</li><li>新的值会被缓存，同时<code>dirty</code>标志会被设置为<code>false</code>，表示已计算。</li><li>新的依赖项会被清理，并新的依赖项会被追踪。</li></ol><p>这个缓存机制确保了<code>computed</code>属性的值只有在相关依赖项发生变化时才会重新计算，提高了性能并减少不必要的计算。</p><h3 id="computed使用" tabindex="-1">Computed使用 <a class="header-anchor" href="#computed使用" aria-label="Permalink to &quot;Computed使用&quot;">​</a></h3><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;Count: {{ count }}&lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;Doubled Count: {{ doubledCount }}&lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">@click</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;incrementCount&quot;</span><span style="color:#E1E4E8;">&gt;Increment Count&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ref, computed } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">doubledCount</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">computed</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// 计算属性，依赖于 count</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> count.value </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">incrementCount</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  count.value</span><span style="color:#F97583;">++</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;Count: {{ count }}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;Doubled Count: {{ doubledCount }}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">@click</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;incrementCount&quot;</span><span style="color:#24292E;">&gt;Increment Count&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { ref, computed } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">count</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">doubledCount</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">computed</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// 计算属性，依赖于 count</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> count.value </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">incrementCount</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  count.value</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>在这个示例中，我们同样使用 <code>&lt;script setup&gt;</code> 来导入 <code>ref</code> 和 <code>computed</code>，并创建了 <code>count</code> 和 <code>doubledCount</code> 的响应式变量。然后，我们使用 <code>computed</code> 来创建计算属性 <code>doubledCount</code>，该属性依赖于 <code>count</code> 的值。</p><h2 id="区别与使用场景" tabindex="-1">区别与使用场景 <a class="header-anchor" href="#区别与使用场景" aria-label="Permalink to &quot;区别与使用场景&quot;">​</a></h2><p>上面我们介绍了二者之间的原理及使用方法，下面我们总结一下<code>watch</code>和<code>computed</code>之间的主要区别以及它们的使用场景。</p><h3 id="区别" tabindex="-1">区别 <a class="header-anchor" href="#区别" aria-label="Permalink to &quot;区别&quot;">​</a></h3><ol><li><strong>响应方式</strong>： <ul><li><code>watch</code>用于监视数据的变化，它允许你执行副作用。</li><li><code>computed</code>用于派生出一个新的计算属性，它的值会根据依赖项的变化而变化。</li></ul></li><li><strong>缓存</strong>： <ul><li><code>watch</code>不会缓存结果，每次数据变化都会触发回调。</li><li><code>computed</code>会缓存计算结果，只有在依赖项变化时才会重新计算。</li></ul></li></ol><h3 id="使用场景" tabindex="-1">使用场景 <a class="header-anchor" href="#使用场景" aria-label="Permalink to &quot;使用场景&quot;">​</a></h3><ol><li><p><strong>watch的使用场景</strong>：</p><ul><li>异步操作：当你需要在数据变化时执行异步操作，如发送网络请求。</li><li>副作用：执行一些与数据变化相关的操作，如日志记录或触发动画。</li><li>监听多个数据的变化并执行不同的操作。</li></ul></li><li><p><strong>computed的使用场景</strong>：</p><ul><li>派生属性：当你需要从现有数据派生出新的属性，以便在模板中使用。</li><li>避免重复计算：当某个计算较为昂贵，但其依赖项不经常变化时，使用<code>computed</code>可以避免不必要的计算。</li></ul></li></ol><h2 id="面试建议" tabindex="-1">面试建议 <a class="header-anchor" href="#面试建议" aria-label="Permalink to &quot;面试建议&quot;">​</a></h2><p>面试官常常会问有关<code>watch</code>和<code>computed</code>的问题，以了解你对Vue的响应式系统的理解。下面给一些小建议希望能对你有帮助：</p><ol><li><strong>理解原理</strong>：确保你理解<code>watch</code>和<code>computed</code>的工作原理以及它们与Vue的响应式系统的关系。</li><li><strong>使用示例</strong>：能够提供清晰的示例，说明如何使用<code>watch</code>和<code>computed</code>，以及何时使用它们。</li><li><strong>区别与使用场景</strong>：强调<code>watch</code>和<code>computed</code>之间的区别，以及何时选择其中之一的使用场景。</li><li><strong>性能考虑</strong>：在回答关于性能的问题时，能够解释<code>computed</code>如何帮助避免不必要的计算，并提高性能。</li><li><strong>示范经验</strong>：分享你在实际项目中使用<code>watch</code>和<code>computed</code>的经验和成功案例，这可以让面试官对你的实际技能有更好的了解。</li></ol><h3 id="学习资料推荐" tabindex="-1">学习资料推荐 <a class="header-anchor" href="#学习资料推荐" aria-label="Permalink to &quot;学习资料推荐&quot;">​</a></h3><p><img src="https://cdn.geekbuluo.com/blog/20231023/a3558f.png" alt="image-20231023190146036"></p><p><img src="https://cdn.geekbuluo.com/blog/20231023/d6d38b.png" alt="image-20231023190222291"></p><p>学习资料关注公众号<code>前端大湿兄</code>后台回复：<code> 学习资源</code>免费领取哦~</p></div></div></article><aside class="sidebar h-fit ml-4 bg-white w-75" data-v-0cd1f2d6 data-v-c423789e><div class="pos-fixed w-75" data-v-c423789e><section class="p-3.5 flex flex-col bg-white rounded-2" data-v-c423789e data-v-a21a40ff><h4 class="title flex items-center font-600" data-v-a21a40ff> 关注公众号，更多惊喜🤣 </h4><div class="flex justify-center mt-4 mb-1" data-v-a21a40ff><img class="w-45 h-45 rounded-1 object-contain pointer-events-none" src="/qrcode.jpg" alt="" data-v-a21a40ff></div></section></div></aside></main></div></div><footer class="VPFooter" data-v-5a346dfe data-v-e03eb2e1><div class="container" data-v-e03eb2e1><p class="message" data-v-e03eb2e1>网站地图 - 友情链接 - 版权说明 - 侵删联系 - <a target="_blank" href="https://beian.miit.gov.cn/">皖ICP备17005424号-2</a></p><p class="copyright" data-v-e03eb2e1>CopyRight © 2020-2023 <a target="_blank" href="//geekbuluo.com">极客部落</a> All Rights Reserved</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"category_resource.md\":\"afade10b\",\"category_category.md\":\"ade28233\",\"category_course.md\":\"23e2f6a7\",\"category_special.md\":\"0b8442d0\",\"index.md\":\"737ece7e\",\"interview-question_git常用命令.md\":\"99de6d5d\",\"interview-question_储藏stash.md\":\"0f9d6715\",\"interview-question_13个很酷但很少有人知道的html元素.md\":\"a4e27f38\",\"interview-question_doctype.md\":\"7b99b3de\",\"interview-question_html基础.md\":\"03dd316e\",\"interview-question_meta标签.md\":\"2b26b099\",\"interview-question_json stringify特性.md\":\"eaf8f82a\",\"interview-question_js中的计时器能做到精确计时吗？为什么？.md\":\"8de14a84\",\"interview-question_js异步.md\":\"6205d61b\",\"interview-question_for-in vs for-of.md\":\"71074655\",\"interview-question_事件循环.md\":\"095a8c7f\",\"interview-question_docker概念.md\":\"26f89c9f\",\"interview-question_git工作区_暂存区的操作命令.md\":\"487bb776\",\"interview-question_git基本操作.md\":\"c3a58346\",\"interview-question_前端css基础.md\":\"2127052b\",\"interview-question_docker起步.md\":\"40551c73\",\"interview-question_url转码和解码.md\":\"2276bdd5\",\"interview-question_跨页面通信.md\":\"2aae9a06\",\"interview-question_九种跨域方式实现原理.md\":\"17067e37\",\"interview-question_常用的js函数.md\":\"32f8fa9d\",\"interview-question_npm常用操作.md\":\"73bb6d2d\",\"interview-question_type of 和 key of 的区别.md\":\"c22a153e\",\"interview-question_浅拷贝与深拷贝.md\":\"3caffe7d\",\"interview-question_require加载器实现原理.md\":\"eaa82355\",\"interview-question_react常见面试题.md\":\"3a533fad\",\"interview-question_nginx代理.md\":\"223bed73\",\"interview-question_手写promise.md\":\"f49d4f0a\",\"interview-question_interface 和 type 的区别.md\":\"db57e61c\",\"interview-question_react hooks.md\":\"8267cf91\",\"interview-question_小程序代码包极致压缩之路.md\":\"6ee431ce\",\"interview-question_小程序生命周期.md\":\"fd80301d\",\"interview-question_小程序面试题.md\":\"b558af70\",\"interview-question_基础知识.md\":\"27b479dd\",\"interview-question_微信小程序中路由跳转的方式有哪些？.md\":\"d82aa495\",\"interview-question_微信小程序的实现原理.md\":\"14dc7ff3\",\"interview-question_微信小程序的支付流程.md\":\"4ecd6abd\",\"interview-question_微信小程序的理解.md\":\"76c19b4e\",\"interview-question_红绿灯的两种实现.md\":\"c708407d\",\"interview-question_微信小程序的登录流程.md\":\"9f248b03\",\"interview-question_提高微信小程序的应用速度的手段有哪些？.md\":\"0e8728f4\",\"interview-question_减少引用类型内存访问.md\":\"618fd0b2\",\"interview-question_前端需要了解的nodejs.md\":\"30c4cf15\",\"interview-question_请求合并.md\":\"ad85c2fb\",\"interview-question_前端实现拖拽.md\":\"058a5e0c\",\"interview-question_html优化.md\":\"81fb0050\",\"interview-question_小程序攻略.md\":\"b6ed9106\",\"interview-question_代理模式.md\":\"b11b3eba\",\"interview-question_懒加载和预加载.md\":\"bb11134c\",\"interview-question_设计一个 js 插件系统.md\":\"07f840ee\",\"interview-question_2023高频前端面试题之css篇.md\":\"87e1aa50\",\"interview-question_如何减少卡顿.md\":\"fc4760e5\",\"interview-question_适配器模式.md\":\"74037b34\",\"interview-question_观察者模式.md\":\"e53a38b2\",\"interview-question_最全的前端性能定位总结.md\":\"0cefc08d\",\"interview-question_void  和 never  类型的 区别.md\":\"7fe0c495\",\"interview-question_高级前端面试(下).md\":\"e9d19e13\",\"interview-question_unknown 和  any 的区别.md\":\"213f5584\",\"interview-question_说说你对 typescript 的理解？与 javascript 的区别？.md\":\"28dd906a\",\"interview-question_webpack常见面试题.md\":\"a3353912\",\"interview-question_webpack中的三种hash分别是什么.md\":\"496c7d83\",\"interview-question_webpack 编译时样式美化.md\":\"0618a9b9\",\"interview-question_vue3中操作dom的四种方式.md\":\"3ccd7100\",\"interview-question_前端水印功能.md\":\"7fbf21af\",\"interview-question_装饰器模式.md\":\"9e41a5cf\",\"interview-question_前端面试万字总结（浏览器网络篇）.md\":\"4c3f7538\",\"interview-question_tsconfig配置.md\":\"6564706e\",\"interview-question_无感刷新token.md\":\"d0fee296\",\"interview-question_npm link创建软链.md\":\"38452245\",\"interview-question_typescript面试题集合.md\":\"4042ab4b\",\"interview-question_图片懒加载.md\":\"c4311abc\",\"interview-question_前端性能监控performance.md\":\"55d3ece9\",\"interview-question_2023高频前端面试题之html篇.md\":\"dc19b904\",\"interview-question_微信小程序的发布流程.md\":\"8f8dd6a8\",\"interview-question_策略模式.md\":\"362f4642\",\"article_别只会console.log了，试试这个.md\":\"87a20245\",\"article_前端 cookie 最佳实践.md\":\"d5f27808\",\"interview-question_如何实现并发请求数量控制.md\":\"f5268c56\",\"interview-question_requestanimationframe 和 requestidlecallback.md\":\"82a3912f\",\"interview-question_字节前端面试题.md\":\"c06842e4\",\"article_2023年前端开发常用的js函数.md\":\"15fe6b56\",\"article_2023年前端开发必读书籍推荐.md\":\"046bc947\",\"article_bun.js基础入门.md\":\"6b12d3e7\",\"interview-question_高级前端面试(中).md\":\"ba7d91de\",\"article_纯css实现红丝带.md\":\"5d6274ce\",\"article_手写promise.md\":\"36038fa3\",\"article_揭秘前端滑块验证技术.md\":\"3d2e9ddc\",\"article_浅析requestanimationframe的用法与优化.md\":\"a005e21e\",\"interview-question_微信小程序实现一些优惠券.md\":\"a077abf5\",\"article_超简单讲解js作用域.md\":\"31178441\",\"article_一文扫盲javascript运算符.md\":\"7fda1b3d\",\"article_面试中常问的watch和computed区别.md\":\"4ffc362e\",\"interview-question_高级前端面试(上).md\":\"c687ed78\",\"article_前端优雅处理大数运算.md\":\"46e1374e\",\"article_前端实现水印的多种方案.md\":\"c2313fd3\",\"article_npm run xx到底做了什么.md\":\"ac78903e\",\"article_let和const如何实现块级作用域.md\":\"301fb3bd\",\"article_es6模版字符串最全讲解.md\":\"03f5d2bb\",\"article_前端已死_不要慌.md\":\"6bc466e4\",\"interview-question_发布订阅模式.md\":\"796cac97\",\"interview-question_37个常见vue面试题.md\":\"ba504edc\",\"article_前端开发实践：如何快速提取字体文件中的文字.md\":\"5eb67f4a\",\"全部文档_编程资源_前端_css新世界.md\":\"7bc7ad3d\",\"article_前端程序员必会的20个正则表达式.md\":\"3362d586\",\"article_7个简单但棘手的javascript面试问题.md\":\"1d9dab42\",\"interview-question_30道vue 面试题.md\":\"57f34887\",\"article_前端性能优化必杀技：骨架屏让你快人一步.md\":\"ed56ec9b\",\"article_node实现云函数.md\":\"ec202b5d\",\"article_react开发者：不要再用__渲染ui了.md\":\"1d445c7e\",\"interview-question_常见的前端算法题.md\":\"40b9504f\",\"article_js单线程与事件循环，看这篇就够了.md\":\"8ddae2b8\",\"article_全网最全js运算符讲解.md\":\"4966881e\",\"article_es14新特性揭秘，对前端开发有哪些影响.md\":\"c7dc8e8d\",\"article_一文搞懂单线程和事件循环.md\":\"04559529\",\"article_快速制作一个实用的chrome拓展插件.md\":\"b9954ae7\",\"interview-question_高频前端面试题合集之javascript篇.md\":\"34d11cb1\",\"article_彻底搞懂jsonp.md\":\"b4ee762a\",\"article_彻底搞懂函数柯里化.md\":\"2cd3ffae\",\"article_javascript防抖与节流.md\":\"03e521a6\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"极客部落\",\"description\":\"专注于分享最有价值的互联网技术干货\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"siteTitle\":\"极客部落\",\"outline\":\"deep\",\"outlineTitle\":\"本文目录\",\"lastUpdatedText\":\"最后更新\",\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"},\"footer\":{\"message\":\"网站地图 - 友情链接 - 版权说明 - 侵删联系 - <a target=\\\"_blank\\\" href=\\\"https://beian.miit.gov.cn/\\\">皖ICP备17005424号-2</a>\",\"copyright\":\"CopyRight © 2020-2023 <a target=\\\"_blank\\\" href=\\\"//geekbuluo.com\\\">极客部落</a> All Rights Reserved\"},\"nav\":[{\"text\":\"🏘️ 首页\",\"link\":\"/\"},{\"text\":\"🎉 技术专栏\",\"link\":\"/category/special\"},{\"text\":\"🤣 面试宝典\",\"link\":\"/interview-question/HTML基础\",\"activeMatch\":\"/interview-question/\"},{\"text\":\"📚 编程资源\",\"link\":\"/category/resource\"}],\"sidebar\":{\"/interview-question/\":[{\"text\":\"html\",\"items\":[{\"text\":\"基础\",\"link\":\"/interview-question/HTML基础.md\"},{\"text\":\"DOCTYPE\",\"link\":\"/interview-question/DOCTYPE.md\"},{\"text\":\"meta标签知识\",\"link\":\"/interview-question/meta标签.md\"},{\"text\":\"13个很酷但很少有人知道的HTML元素\",\"link\":\"/interview-question/13个很酷但很少有人知道的HTML元素.md\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"CSS\",\"items\":[{\"text\":\"基础\",\"link\":\"/interview-question/前端css基础.md\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"JavaScript\",\"items\":[{\"text\":\"如何理解 js 的异步\",\"link\":\"/interview-question/JS异步.md\"},{\"text\":\"事件循环\",\"link\":\"/interview-question/事件循环.md\"},{\"text\":\"JS 中的计时器能做到精确计时吗？为什么？\",\"link\":\"/interview-question/JS中的计时器能做到精确计时吗？为什么？.md\"},{\"text\":\"跨域\",\"link\":\"/interview-question/九种跨域方式实现原理.md\"},{\"text\":\"浅拷贝与深拷贝\",\"link\":\"/interview-question/浅拷贝与深拷贝.md\"},{\"text\":\"JSON-stringify\",\"link\":\"/interview-question/JSON stringify特性.md\"},{\"text\":\"URL 转码 和解码\",\"link\":\"/interview-question/URL转码和解码.md\"},{\"text\":\"for-in vs for-of\",\"link\":\"/interview-question/for-in vs for-of.md\"},{\"text\":\"跨页面通信\",\"link\":\"/interview-question/跨页面通信.md\"},{\"text\":\"手写常用函数\",\"link\":\"/interview-question/常用的js函数.md\"},{\"text\":\"手写promise\",\"link\":\"/interview-question/手写Promise.md\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"TypeScript\",\"items\":[{\"text\":\"说说你对 TypeScript 的理解？与 JavaScript 的区别？\",\"link\":\"/interview-question/说说你对 TypeScript 的理解？与 JavaScript 的区别？.md\"},{\"text\":\"tsconfig\",\"link\":\"/interview-question/tsconfig配置.md\"},{\"text\":\"typescript面试题集合\",\"link\":\"/interview-question/typescript面试题集合.md\"},{\"text\":\"interface 和 type 的区别\",\"link\":\"/interview-question/interface 和 type 的区别.md\"},{\"text\":\"unknown 和any 的区别\",\"link\":\"/interview-question/unknown 和  any 的区别.md\"},{\"text\":\"type of 和 key of 的区别\",\"link\":\"/interview-question/type of 和 key of 的区别.md\"},{\"text\":\"void  和 never  类型的 区别\",\"link\":\"/interview-question/void  和 never  类型的 区别.md\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"微信小程序\",\"items\":[{\"text\":\"小程序面试题\",\"link\":\"/interview-question/小程序面试题.md\"},{\"text\":\"微信小程序的攻略\",\"link\":\"/interview-question/小程序攻略.md\"},{\"text\":\"微信小程序的理解\",\"link\":\"/interview-question/微信小程序的理解.md\"},{\"text\":\"小程序生命周期\",\"link\":\"/interview-question/小程序生命周期.md\"},{\"text\":\"微信小程序中路由跳转的方式有哪些？\",\"link\":\"/interview-question/微信小程序中路由跳转的方式有哪些？.md\"},{\"text\":\"提高微信小程序的应用速度的手段有哪些\",\"link\":\"/interview-question/提高微信小程序的应用速度的手段有哪些？.md\"},{\"text\":\"微信小程序的登录流程\",\"link\":\"/interview-question/微信小程序的登录流程.md\"},{\"text\":\"微信小程序的发布流程\",\"link\":\"/interview-question/微信小程序的发布流程.md\"},{\"text\":\"微信小程序的支付流程\",\"link\":\"/interview-question/微信小程序的支付流程.md\"},{\"text\":\"微信小程序的实现原理\",\"link\":\"/interview-question/微信小程序的实现原理.md\"},{\"text\":\"微信小程序优化\",\"link\":\"/interview-question/小程序代码包极致压缩之路.md\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"性能优化\",\"items\":[{\"text\":\"performance\",\"link\":\"/interview-question/前端性能监控Performance.md\"},{\"text\":\"最全的前端性能定位总结 \",\"link\":\"/interview-question/最全的前端性能定位总结.md\"},{\"text\":\"HTML优化\",\"link\":\"/interview-question/HTML优化.md\"},{\"text\":\"图片懒加载\",\"link\":\"/interview-question/图片懒加载.md\"},{\"text\":\"减少引用类型内存访问\",\"link\":\"/interview-question/减少引用类型内存访问.md\"},{\"text\":\"何减少卡顿的代码\",\"link\":\"/interview-question/如何减少卡顿.md\"},{\"text\":\"前端懒加载和预加载\",\"link\":\"/interview-question/懒加载和预加载.md\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"Vue\",\"items\":[{\"text\":\"Vue3中操作dom的四种方式\",\"link\":\"/interview-question/Vue3中操作dom的四种方式.md\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"React\",\"items\":[{\"text\":\"自定义hooks\",\"link\":\"/interview-question/react hooks.md\"},{\"text\":\"React的setState是异步的还是同步的\",\"link\":\"/interview-question/react常见面试题.md\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"Webpack\",\"items\":[{\"text\":\"webpack\",\"link\":\"/interview-question/webpack常见面试题.md\"},{\"text\":\"hash的3种方式\",\"link\":\"/interview-question/webpack中的三种hash分别是什么.md\"},{\"text\":\"webpack 编译时样式美化\",\"link\":\"/interview-question/webpack 编译时样式美化.md\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"Node\",\"items\":[{\"text\":\"前端需要了解的nodejs知识\",\"link\":\"/interview-question/前端需要了解的nodejs.md\"},{\"text\":\"require加载器实现原理 \",\"link\":\"/interview-question/require加载器实现原理.md\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"npm\",\"items\":[{\"text\":\"常用操作\",\"link\":\"/interview-question/npm常用操作.md\"},{\"text\":\"link 创建软链\",\"link\":\"/interview-question/npm link创建软链.md\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"设计模式 \",\"items\":[{\"text\":\"发布订阅模式\",\"link\":\"/interview-question/发布订阅模式.md\"},{\"text\":\"观察者模式\",\"link\":\"/interview-question/观察者模式.md\"},{\"text\":\"代理模式\",\"link\":\"/interview-question/代理模式.md\"},{\"text\":\"装饰器模式\",\"link\":\"/interview-question/装饰器模式.md\"},{\"text\":\"适配器模式\",\"link\":\"/interview-question/适配器模式.md\"},{\"text\":\"策略模式\",\"link\":\"/interview-question/策略模式.md\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"git\",\"items\":[{\"text\":\"储藏 stash\",\"link\":\"/interview-question/git基本操作.md\"},{\"text\":\"常用命令\",\"link\":\"/interview-question/git常用命令.md\"},{\"text\":\"工作区&暂存区的操作命令\",\"link\":\"/interview-question/git工作区&暂存区的操作命令.md\"},{\"text\":\"本地仓库上的操作&gitignore\",\"link\":\"/interview-question/储藏stash.md\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"Nginx \",\"items\":[{\"text\":\"Nginx\",\"link\":\"/interview-question/nginx代理.md\"},{\"text\":\"基础知识\",\"link\":\"/interview-question/基础知识.md\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"Docker\",\"items\":[{\"text\":\"Docker概念\",\"link\":\"/interview-question/docker概念.md\"},{\"text\":\"Docker介绍\",\"link\":\"/interview-question/docker起步.md\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"场景题\",\"items\":[{\"text\":\"并发请求数量控制\",\"link\":\"/interview-question/如何实现并发请求数量控制.md\"},{\"text\":\"【译】设计一个 JS 插件系统 \",\"link\":\"/interview-question/设计一个 JS 插件系统.md\"},{\"text\":\"微信小程序实现一些优惠券/卡券\",\"link\":\"/interview-question/微信小程序实现一些优惠券.md\"},{\"text\":\"无感刷新token\",\"link\":\"/interview-question/感刷新token.md\"},{\"text\":\"文本环绕球体\",\"link\":\"/interview-question/\"},{\"text\":\"前端水印功能\",\"link\":\"/interview-question/前端水印功能.md\"},{\"text\":\"EventLoop\",\"link\":\"/interview-question/\"},{\"text\":\"请求合并\",\"link\":\"/interview-question/请求合并.md\"},{\"text\":\"拖拽的实现\",\"link\":\"/interview-question/前端实现拖拽.md\"},{\"text\":\"红绿灯\",\"link\":\"/interview-question/红绿灯的两种实现.md\"},{\"text\":\"requestAnimationFrame 和 requestIdleCallback\",\"link\":\"/interview-question/requestAnimationFrame 和 requestIdleCallback.md\"}],\"collapsible\":true,\"collapsed\":true},{\"text\":\"前端面试题纲集合\",\"items\":[{\"text\":\"30道Vue面试题\",\"link\":\"/interview-question/30道Vue 面试题.md\"},{\"text\":\"字节前端面试题\",\"link\":\"/interview-question/字节前端面试题.md\"},{\"text\":\"37个常见Vue面试题\",\"link\":\"/interview-question/37个常见Vue面试题.md\"},{\"text\":\"2023高频前端面试题(HTML)\",\"link\":\"/interview-question/2023高频前端面试题之HTML篇.md\"},{\"text\":\"2023高频前端面试题(CSS)\",\"link\":\"/interview-question/2023高频前端面试题之CSS篇.md\"},{\"text\":\"2023高频前端面试题(JavaSript)\",\"link\":\"/interview-question/高频前端面试题合集之JavaScript篇.md\"},{\"text\":\"高级前端面试题(上)\",\"link\":\"/interview-question/高级前端面试(上).md\"},{\"text\":\"高级前端面试题(中)\",\"link\":\"/interview-question/高级前端面试(下).md\"},{\"text\":\"高级前端面试题(下)\",\"link\":\"/interview-question/高级前端面试(中).md\"},{\"text\":\"常见的前端算法题\",\"link\":\"/interview-question/常见的前端算法题.md\"},{\"text\":\"前端面试（浏览器）\",\"link\":\"/interview-question/前端面试万字总结（浏览器网络篇）.md\"}],\"collapsible\":true,\"collapsed\":true}]}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>